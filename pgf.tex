% Pgfplots demo
% Author: Christian Feuersänger
% Source: Pgfplots manual:
% http://www.ctan.org/tex-archive/help/Catalogue/entries/pgfplots.html
\documentclass{article}

\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{verbatim}

\let\ex\expandafter
\pdfcompresslevel=0


\newcounter{mcid}

\begin{comment}
:Title: Pgfplots
:Tags: Plots, Macro packages
:Grid: 1x2

Pgfplots_ provides a friendly and well documented_ interface for creating plots with normal or logarithmic scaling.
Axes, legends and labels are added easily.

Download pgfplots from CTAN_.

:Author: Christian Feuersänger
:Source: Pgfplots manual_

.. _pgfplots: http://www.ctan.org/tex-archive/help/Catalogue/entries/pgfplots.html
.. _CTAN: http://www.ctan.org/tex-archive/help/Catalogue/entries/pgfplots.html
.. _manual: http://www.ctan.org/tex-archive/graphics/pgf/contrib/pgfplots/doc/latex/pgfplots/pgfplots.pdf
.. _documented: http://www.ctan.org/tex-archive/graphics/pgf/contrib/pgfplots/doc/latex/pgfplots/pgfplots.pdf

\end{comment}

\begin{document}


%\stepcounter{mcid}
%
%\themcid
%\pdfobj reserveobjnum
%
%\edef\treeroot{\the\pdflastobj}
%
%\immediate\pdfcatalog{/StructTreeRoot \treeroot\space 0 R}
%
%\def\lastr{\the\pdflastobj}
%
%
%

%
%%\special{PDF: /Span <</Alt (Actual text goes here) /S /Figure>> BDC}
%\begin{figure}
%
%\newsavebox\mcidbox
%
%\sbox\mcidbox{
%\special{PDF: /P <</MCID 0>> BDC}
%Inside marked content 0
%\special{PDF: EMC}
%}
%\end{figure}

\shipout\hbox{
\special{PDF: /P <</MCID 0>>BDC}
\begin{tikzpicture}
    \begin{axis}[
        xlabel=$x$,
        ylabel=$y$]
    \addplot[smooth,mark=*,blue] plot coordinates {
        (0,2)
        (2,3)
        (3,1)
    };
    \addlegendentry{Case 1}

    \addplot[smooth,color=red,mark=x]
        plot coordinates {
            (0,0)
            (1,1)
            (2,1)
            (3,2)
        };
    \addlegendentry{Case 2}
    \end{axis}
    \end{tikzpicture}
\special{PDF: EMC}
}

last object: \the\pdflastobj{} 0 R

%\pdfobj reserveobjnum
%\edef\numtree{\the\pdflastobj}
%
%\immediate\pdfobj useobjnum \treeroot {
%<< /Type /StructTreeRoot 
%	/ParentTree \numtree\space 0 R
%	/K [ \the\pdflastobj 0 R ]
%>>
%
%}
%
%
%
%\immediate\pdfobj useobjnum 901 {
%<< /Nums [ 0 902 0 R ] >>
%}
%
%\immediate\pdfobj useobjnum 902 {
%	<<
%		/Type /StructElem
%		/S /Figure
%		/P 900 0 R
%		/Pg \pdfpageref\thepage
%		/ActualText (ABCDEFG)
%		/K 0
%	>>
%}
%
%\immediate\pdfobj useobjnum \pdflastobj {
%	<<
%		/Type /StructElem
%		/S /Figure
%		/Pg \pdfpageref\thepage
%		/ActualText (ABCDEFG)
%		/K 0
%	>>
%}
%
%
%\pdfobj reserveobjnum
%\pdfobj reserveobjnum
%
%more text before shipout
%
%\the\pdflastobj
%\newpage
%
%
%\the\pdflastobj
%
%\pdfobj reserveobjnum
%\pdfobj reserveobjnum
%
%\edef\lastpage{\the\pdflastobj}

\ex\pdfpageattr\ex{\ex/\ex LASTOBJ \lastpage}
%
%\begin{tikzpicture}
%    \begin{loglogaxis}[
%        xlabel=\textsc{Dof},
%        ylabel=$L_2$ Error
%    ]
%    \axispath\draw
%            (7.49165,-10.02171)
%        |-  (8.31801,-11.32467)
%        node[near start,left] {$\frac{dy}{dx} = -1.58$};
%      \addplot plot coordinates {
%        (5,     8.312e-02)
%        (17,    2.547e-02)
%        (49,    7.407e-03)
%        (129,   2.102e-03)
%        (321,   5.874e-04)
%        (769,   1.623e-04)
%        (1793,  4.442e-05)
%        (4097,  1.207e-05)
%        (9217,  3.261e-06)
%    };
%
%    \addplot plot coordinates {
%        (7,     8.472e-02)
%        (31,    3.044e-02)
%        (111,   1.022e-02)
%        (351,   3.303e-03)
%        (1023,  1.039e-03)
%        (2815,  3.196e-04)
%        (7423,  9.658e-05)
%        (18943, 2.873e-05)
%        (47103, 8.437e-06)
%    };
%
%    \addplot plot coordinates {
%        (9, 7.881e-02)
%        (49,    3.243e-02)
%        (209,   1.232e-02)
%        (769,   4.454e-03)
%        (2561,  1.551e-03)
%        (7937,  5.236e-04)
%        (23297, 1.723e-04)
%        (65537, 5.545e-05)
%        (178177,    1.751e-05)
%    };
%
%    \addplot plot coordinates {
%        (11,    6.887e-02)
%        (71,    3.177e-02)
%        (351,   1.341e-02)
%        (1471,  5.334e-03)
%        (5503,  2.027e-03)
%        (18943, 7.415e-04)
%        (61183, 2.628e-04)
%        (187903,    9.063e-05)
%        (553983,    3.053e-05)
%    };
%
%    \addplot plot coordinates {
%        (13,    5.755e-02)
%        (97,    2.925e-02)
%        (545,   1.351e-02)
%        (2561,  5.842e-03)
%        (10625, 2.397e-03)
%        (40193, 9.414e-04)
%        (141569,    3.564e-04)
%        (471041,    1.308e-04)
%        (1496065,   4.670e-05)
%    };
%    \legend{$d=2$\\$d=3$\\$d=4$\\$d=5$\\$d=6$\\}
%
%    \end{loglogaxis}
%\end{tikzpicture}

%\begin{tikzpicture}
%    \begin{axis}[
%        xlabel=$x$,
%        ylabel=$y$]
%    \addplot[smooth,mark=*,blue] plot coordinates {
%        (0,2)
%        (2,3)
%        (3,1)
%    };
%    \addlegendentry{Case 1}
%
%    \addplot[smooth,color=red,mark=x]
%        plot coordinates {
%            (0,0)
%            (1,1)
%            (2,1)
%            (3,2)
%        };
%    \addlegendentry{Case 2}
%    \end{axis}
%    \end{tikzpicture}
\end{document}